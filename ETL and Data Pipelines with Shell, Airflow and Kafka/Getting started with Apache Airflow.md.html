<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.7.1/styles/default.min.css">
  </head>
  <body>
    <center>
      <img src="https://gitlab.com/ibm/skills-network/courses/placeholder101/-/raw/master/labs/module%201/images/IDSNlogo.png" width="300" alt="cognitiveclass.ai logo">
    </center>
    <h1>Hands-on Lab: Getting started with Apache Airflow</h1>
    <p>Estimated time needed: <strong>20</strong> minutes</p>
    <h2>Objectives</h2>
    <p>After completing this lab you will be able to:</p>
    <ul>
      <li>Start Apache Airflow.</li>
      <li>Open the Airflow UI in a browser.</li>
      <li>List all the DAGs.</li>
      <li>List the tasks in a DAG.</li>
      <li>Explore a DAG in the UI.</li>
    </ul>
    <h1>About Skills Network Cloud IDE</h1>
    <p>Skills Network Cloud IDE (based on Theia and Docker) provides an environment for hands on labs for course and project related labs. Theia is an open source IDE (Integrated Development Environment), that can be run on desktop or on the cloud. To complete this lab, we will be using the Cloud IDE based on Theia running in a Docker container.</p>
    <h2>Important Notice about this lab environment</h2>
    <p>Please be aware that sessions for this lab environment are not persistent. A new environment is created for you every time you connect to this lab. Any data you may have saved in an earlier session will get lost. To avoid losing your data, please plan to complete these labs in a single session.</p>
    <h1>Exercise 1 - Start Apache Airflow</h1>
    <p>Open a new terminal by clicking on the menu bar and selecting <strong>Terminal</strong>-><strong>New Terminal</strong>, as shown in the image below.</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/new-terminal.png" alt="Screenshot highlighting New Terminal in dropdown menu">
    </p>
    <p>This will open a new terminal at the bottom of the screen as in the image below.</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/terminal_bottom_screen.png" alt="Screenshot highlighting new terminal at the bottom of the screen">
    </p>
    <p>Run the commands below on the newly opened terminal. (You can copy the code by clicking on the little copy button on the bottom right of the codeblock below and paste it wherever you wish.)</p>
    <p>Run the command below in the terminal to start Apache Airflow.</p>
    <pre><code class="hljs language-ebnf"><span class="hljs-attribute">start_airflow</span>
</code></pre>
    <p></p>
    <p>Please be patient, it may take upto 5 minutes for airflow to get started.</p>
    <p>When airflow starts successfully, you should see an output similar to the one below.</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/start_airflow.png" alt="Screenshot highlighting UI URL, Username, and Password">
    </p>
    <h1>Exercise 2 - Open the Airflow Web UI</h1>
    <p>Copy the Web-UI URL and paste it on a new browser tab. You can also click on the URL by holding the control key (Command key in case of a Mac).</p>
    <p>You should land at a page that looks like this:</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/airflow_webui.png" alt="Screenshot of Skills Network Airflow">
    </p>
    <p>You can Unpause/Pause a DAG using the Unpause/Pause toggle button.</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/airflow_pause_unpause.png" alt="Screenshot highlighting Unpause/Pause toggle button">
    </p>
    <p>An unpaused DAG looks like this:</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/airflow_unpaused_dag.png" alt="Screenshot of Unpaused button">
    </p>
    <p>Click on a DAG to explore more about the DAG.</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/airflow_dag_click.png" alt="Screenshot highlighting ETL DAG tutorial">
    </p>
    <p>Click on the Tree View button to see the tree view of the DAG.</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/airflow_tree_view.png" alt="Screenshot highlighting Tree View button">
    </p>
    <p>Click on the Graph View button to see the graph view of the DAG.</p>
    <p>
      <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Apache%20Airflow/Getting%20Started%20with%20Apache%20Airflow/images/airflow_graph_view.png" alt="Screenshot highlighting Graph view button and graph view">
    </p>
    <h1>Exercise 3 - List all DAGs</h1>
    <p>Apache airflow gives us some handy command line options to work with.</p>
    <p>Run the command below in the terminal to list out all the existing DAGs.</p>
    <pre><code class="hljs language-ebnf"><span class="hljs-attribute">airflow dags list</span>
</code></pre>
    <p></p>
    <h1>Exercise 4 - List tasks in a DAG</h1>
    <p>Run the command below in the terminal to list out all the tasks in the DAG named <code>example_bash_operator</code>.</p>
    <pre><code class="hljs language-ebnf"><span class="hljs-attribute">airflow tasks list example_bash_operator</span>
</code></pre>
    <p>Here <code>example_bash_operator</code> is the name of the DAG.</p>
    <p>Try listing out the tasks for the DAG <code>tutorial</code>.</p>
    <h1>Exercise 5 - Pause/Unpause a DAG</h1>
    <p>Run the command below in the terminal to unpause a DAG.</p>
    <pre><code class="hljs language-ebnf"><span class="hljs-attribute">airflow dags unpause tutorial</span>
</code></pre>
    <p></p>
    <p>Here <code>tutorial </code>is the name of the DAG.</p>
    <p>Pause a DAG.</p>
    <pre><code class="hljs language-stata">airflow dags <span class="hljs-keyword">pause</span> <span class="hljs-keyword">tutorial</span>
</code></pre>
    <p></p>
    <p>Try to unpause the DAG named <code>example_branch_operator</code>.</p>
    <h1>Practice exercises</h1>
    <ol>
      <li>Problem:</li>
    </ol>
    <blockquote>
      <p><em>List tasks for the DAG <code>example_branch_labels</code>.</em></p>
    </blockquote>
    <details>
      <summary>Click here for Hint</summary>
      <blockquote>
        <p>Use <code>list</code> option.</p>
      </blockquote>
    </details>
    <details>
      <summary>Click here for Solution</summary>
      <pre><code class="hljs language-ebnf"><span class="hljs-attribute">airflow tasks list example_branch_labels</span>
</code></pre>
      <p></p>
    </details>
    <ol start="2">
      <li>Problem:</li>
    </ol>
    <blockquote>
      <p><em>Unpause the DAG <code>example_branch_labels</code>.</em></p>
    </blockquote>
    <details>
      <summary>Click here for Hint</summary>
      <blockquote>
        <p>Use the unpause option.</p>
      </blockquote>
    </details>
    <details>
      <summary>Click here for Solution</summary>
      <pre><code class="hljs language-ebnf"><span class="hljs-attribute">airflow dags unpause example_branch_labels</span>

</code></pre>
      <p></p>
    </details>
    <ol start="3">
      <li>Problem:</li>
    </ol>
    <blockquote>
      <p><em>Pause the DAG <code>example_branch_labels</code>.</em></p>
    </blockquote>
    <details>
      <summary>Click here for Hint</summary>
      <blockquote>
        <p>Use the pause option.</p>
      </blockquote>
    </details>
    <details>
      <summary>Click here for Solution</summary>
      <pre><code class="hljs language-autohotkey">airflow dags <span class="hljs-keyword">pause</span> example_branch_labels

</code></pre>
      <p></p>
    </details>
    <h2>Authors</h2>
    <p>Ramesh Sannareddy</p>
    <h3>Other Contributors</h3>
    <p>Rav Ahuja</p>
    <h2>Change Log</h2>
    <table>
      <thead>
        <tr>
          <th>Date (YYYY-MM-DD)</th>
          <th>Version</th>
          <th>Changed By</th>
          <th>Change Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>2021-07-05</td>
          <td>0.1</td>
          <td>Ramesh Sannareddy</td>
          <td>Created initial version of the lab</td>
        </tr>
      </tbody>
    </table>
    <p>Copyright (c) 2021 IBM Corporation. All rights reserved.</p>
    <script>window.addEventListener('load', function() {
snFaculty.inject();
});</script>
    <script src="https://skills-network-assets.s3.us.cloud-object-storage.appdomain.cloud/scripts/inject.43989f87.js"></script>
    <script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.1/highlight.min.js"></script>
    <script src="https://unpkg.com/highlightjs-badge@0.1.9/highlightjs-badge.min.js"></script>
  </body>
</html>
